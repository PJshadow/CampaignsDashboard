                <main>
                    <div class="container-fluid px-4">
                        <h1 class="mt-4">Dashboard do {{name}}</h1>
                        <ol class="breadcrumb mb-4">
                            <li class="breadcrumb-item active">Painel de Controle do Agente IA e Workflows</li>
                        </ol>

                        <div class="row">
                            <div class="col-xl-6">
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <i class="fas fa-chart-area me-1"></i>
                                        Leads alcançados por dia
                                    </div>
                                    <div class="card-body"><canvas id="myAreaChart" width="100%" height="40"></canvas></div>
                                </div>
                            </div>
                            <div class="col-xl-6">
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <i class="fas fa-chart-bar me-1"></i>
                                        Novos cadastros de usuários por mês
                                    </div>
                                    <div class="card-body"><canvas id="myBarChart" width="100%" height="40"></canvas></div>
                                </div>
                            </div>
                                                        <div class="col-xl-6">
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <i class="fas fa-chart-area me-1"></i>
                                        Campanha em andamento
                                    </div>
                                    <div class="card-body"<canvas id="myBarChart" width="100%" height="40">
                                        <div id="campanhas-container">
                                            <p>Carregando campanhas...</p>
                                        </div>
                                        <script>
                                            function carregarCampanhas() {
                                                fetch('/api/campanhas')
                                                .then(response => response.json())
                                                .then(data => {
                                                    const container = document.getElementById('campanhas-container');
                                                    container.innerHTML = ''; // limpa conteúdo anterior

                                                    if (data.length === 0) {
                                                    container.innerHTML = '<p>Nenhuma campanha ativa no momento.</p>';
                                                    } else {
                                                    data.forEach(campanha => {
                                                        const bloco = `
                                                        <div class="campanha">
                                                            <p><strong>Tipo de Campanha em Andamento:</strong> ${campanha.TipoDeCampanha}</p>
                                                            <p><strong>Tipo de Lead:</strong> ${campanha.TipoDeLead}</p>
                                                            <p><strong>Horário de Início:</strong> ${new Date(campanha.Inicio).toLocaleString()}</p>
                                                            <p><strong>Contatos feitos até o momento:</strong> ${campanha.leadsAlcancados}</p>
                                                        </div>
                                                        `;
                                                        container.innerHTML += bloco;
                                                    });
                                                    }
                                                })
                                                .catch(error => {
                                                    console.error('Erro ao carregar campanhas:', error);
                                                    document.getElementById('campanhas-container').innerHTML = '<p>Erro ao carregar campanhas.</p>';
                                                });
                                            }

  // Atualiza a cada 60 segundos
  setInterval(carregarCampanhas, 60000);
  // Carrega imediatamente ao abrir a página
  carregarCampanhas();
</script>


                                        </canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>